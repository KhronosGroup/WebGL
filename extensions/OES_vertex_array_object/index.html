<!--AUTOGENERATED FILE - DO NOT EDIT - SEE Makefile--><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>WebGL OES_vertex_array_object Extension Draft Specification</title>
<link rel="alternate" type="text/xml" href="extension.xml">
<link rel="stylesheet" type="text/css" href="../../resources/Khronos-WD.css">
</head>
<body>
<!--begin-logo--><div class="left"><a href="http://webgl.org/"><img alt="WebGL" height="72" src="../../resources/WebGL-Logo.png" width="156"></a></div>
<div class="right"><a href="http://khronos.org/"><img alt="Khronos" height="60" src="../../resources/KhronosGroup-3D.png" width="220"></a></div>
<div style="clear: both;"></div>
<br><!--end-logo--><h1>WebGL OES_vertex_array_object Extension Draft Specification</h1>
<h2 class="no-toc">Name</h2>
<p>OES_vertex_array_object</p>
<h2 class="no-toc">Contact</h2>
<p>
    <a href="https://www.khronos.org/webgl/public-mailing-list/">WebGL working group</a> (public_webgl 'at' khronos.org)
  </p>
<h2 class="no-toc">Contributors</h2>
<p>Members of the WebGL working group</p>
<h2 class="no-toc">Version</h2>
<p> Last modified date: September 24, 2012<br>
          Revision: 6</p>
<h2 class="no-toc">Number</h2>
<p> WebGL extension #5</p>
<h2 class="no-toc">Dependencies</h2>
    <p> Written against the <a href="http://www.khronos.org/registry/webgl/specs/1.0/">WebGL API 1.0</a> specification. </p>
  <h2 class="no-toc">Overview</h2>
    <p> This extension exposes the
  <a href="http://www.khronos.org/registry/gles/extensions/OES/OES_vertex_array_object.txt">OES_vertex_array_object</a> functionality to
  
      WebGL. There are no WebGL-specific behavioral changes.
    </p>
<p>
        Consult the above extension for documentation, issues and new functions and enumerants.
      </p>
  <h2 class="no-toc">Alias Name Strings (for draft extensions)</h2>
<ul>
<li>WEBKIT_OES_vertex_array_object</li>
<li>MOZ_OES_vertex_array_object</li>
</ul>
<h2 class="no-toc">IDL</h2>
<p><pre class="idl">
interface WebGLVertexArrayObjectOES : WebGLObject {
};

interface OES_vertex_array_object {
    const GLenum VERTEX_ARRAY_BINDING_OES = 0x85B5;

    WebGLVertexArrayObjectOES createVertexArrayOES();
    void deleteVertexArrayOES(WebGLVertexArrayObjectOES arrayObject);
    GLboolean isVertexArrayOES(WebGLVertexArrayObjectOES arrayObject);
    void bindVertexArrayOES(WebGLVertexArrayObjectOES arrayObject);
};
  </pre></p>
<h2 class="no-toc">Issues</h2>
    <p>The OES_vertex_array_object spec does not make it clear
    what happens to buffers that are deleted when they are referenced
    by vertex array objects. It is inferred that all buffers are
    reference counted.
    </p>
    <p>Before OES_vertex_array_object there was no way to use a deleted
    buffer in a single context as the spec states it would be unbound
    from all bind points. After OES_vertex_array_object it is now
    possible to use deleted buffers.
    </p>
    <p>Furthermore, the OpenGL ES 2.0 spec specifies that using a
    deleted buffer has undefined results including possibly
    corrupt rendering and generating GL errors. Undefined behavior
    is unacceptable for WebGL.
    </p>
    <ul>
      <li>
        <p>RESOLVED: Buffers should be reference counted when attached to
        a vertex array object. This is consistent with the OpenGL ES 3.0
        spec's implementation of Vertex Array Objects and matches the 
        behavior of other WebGL objects, such as textures that are attached
        to framebuffers.
        </p>
        <p>This will require that most implementations do not call 
        glDeleteBuffer when the user calls deleteBuffer on the WebGL context.
        Instead the implementation must wait for all references to be released
        before calling glDeleteBuffer to prevent undefined behavior.
        </p>
        <p>If a buffer object is deleted while it is attached to the currently
        bound vertex array object, then it is as if BindBuffer had been called,
        with a buffer of 0, for each target to which this buffer was attached
        in the currently bound vertex array object. In other words, this buffer
        is ﬁrst detached from all attachment points in the currently bound 
        vertex array object. Note that the buffer is speciﬁcally not detached
        from any other vertex array object. Detaching the buffer from any other
        vertex array objects is the responsibility of the application.
        </p>
      </li>
    </ul>
  <h2 class="no-toc">Revision History</h2>
<p>Revision 1, 2011/01/27</p>
<ul><li>Initial revision.</li></ul>
<p>Revision 2, 2011/11/12</p>
<ul><li>Demotion to draft.</li></ul>
<p>Revision 3, 2011/12/06</p>
<ul><li>Added vendor-specific name strings for draft extension per discussion on WebGL mailing list.</li></ul>
<p>Revision 4, 2011/12/07</p>
<ul>
<li>Renamed "Name Strings" section to "Alias Name Strings".</li>
<li>Sorted Revision History in ascending order.</li>
</ul>
<p>Revision 5, 2012/01/03</p>
<ul><li>Removed webgl module per changes to Web IDL spec.</li></ul>
<p>Revision 6, 2012/09/24</p>
<ul><li>Added resolution to deleted buffer issue</li></ul>
</body>
</html>
