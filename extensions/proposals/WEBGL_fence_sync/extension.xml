<?xml version="1.0" encoding="UTF-8"?>
<!-- vi:set sw=2 ts=4: -->
<?xml-stylesheet href="../../extension.xsl" type="text/xsl"?>
<proposal href="proposals/WEBGL_fence_sync/">
  <name>WEBGL_fence_sync</name>

  <contact> <a href="https://www.khronos.org/webgl/public-mailing-list/">WebGL
  working group</a> (public_webgl 'at' khronos.org) </contact>

  <contributors>
    <contributor>Jeff Gilbert, Mozilla</contributor>
  </contributors>

  <number>XYZ</number>

  <depends>
    <api version="1.0"/>
    <removed version="2.0"/>
  </depends>

  <overview>
    <mirrors href="https://www.khronos.org/registry/OpenGL/extensions/APPLE/APPLE_sync.txt"
             name="APPLE_sync">
    </mirrors>

    <features>
      <feature>
        Adds support for FenceSync(SYNC_GPU_COMMANDS_COMPLETE) from WebGL 2.
      </feature>
    </features>
  </overview>

  <idl xml:space="preserve">
    interface WebGLSync : WebGLObject {
    };

    [NoInterfaceObject]
    interface WEBGL_fence_sync {
      const GLenum MAX_SERVER_WAIT_TIMEOUT    = 0x9111;
      const GLenum OBJECT_TYPE                = 0x9112;
      const GLenum SYNC_CONDITION             = 0x9113;
      const GLenum SYNC_STATUS                = 0x9114;
      const GLenum SYNC_FLAGS                 = 0x9115;
      const GLenum SYNC_FENCE                 = 0x9116;
      const GLenum SYNC_GPU_COMMANDS_COMPLETE = 0x9117;
      const GLenum UNSIGNALED                 = 0x9118;
      const GLenum SIGNALED                   = 0x9119;
      const GLenum ALREADY_SIGNALED           = 0x911A;
      const GLenum TIMEOUT_EXPIRED            = 0x911B;
      const GLenum CONDITION_SATISFIED        = 0x911C;
      const GLenum WAIT_FAILED                = 0x911D;
      const GLenum SYNC_FLUSH_COMMANDS_BIT    = 0x00000001;

      WebGLSync? fenceSync(GLenum condition, GLbitfield flags);
      [WebGLHandlesContextLoss] GLboolean isSync(WebGLSync? sync);
      void deleteSync(WebGLSync? sync);
      GLenum clientWaitSync(WebGLSync sync, GLbitfield flags, GLuint64 timeout);
      void waitSync(WebGLSync sync, GLbitfield flags, GLint64 timeout);
      any getSyncParameter(WebGLSync sync, GLenum pname);
    };
  </idl>

  <history>
    <revision date="2017/12/18">
      <change>Initial revision.</change>
    </revision>
  </history>
</proposal>
