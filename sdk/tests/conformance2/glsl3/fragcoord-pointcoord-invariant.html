<!--
Copyright (c) 2023 The Khronos Group Inc.
Use of this source code is governed by an MIT-style license that can be
found in the LICENSE.txt file.
-->

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>WebGL GLSL Conformance Tests - invariant gl_FragCoord and gl_PointCoord</title>
<link rel="stylesheet" href="../../resources/js-test-style.css"/>
<link rel="stylesheet" href="../../resources/glsl-feature-tests.css"/>
<script src="../../js/js-test-pre.js"></script>
<script src="../../js/webgl-test-utils.js"></script>
<script src="../../js/glsl-conformance-test.js"></script>
</head>
<body>
<div id="description"></div>
<div id="console"></div>
<script id="vertexShaderInvariantGlPosition" type="text/something-not-javascript">#version 300 es
precision mediump float;
invariant gl_Position;

void main()
{
    gl_Position = vec4(0, 0, 0, 0);
}
</script>
<script id="fragmentShaderInvariantGlFragCoord" type="text/something-not-javascript">#version 300 es
precision mediump float;
invariant gl_FragCoord;
out vec4 my_color;

void main()
{
    my_color = gl_FragCoord;
}
</script>
<script id="fragmentShaderVariantGlFragCoord" type="text/something-not-javascript">#version 300 es
precision mediump float;
out vec4 my_color;

void main()
{
    my_color = gl_FragCoord;
}
</script>
<script id="vertexShaderInvariantGlPointSize" type="text/something-not-javascript">#version 300 es
precision mediump float;
invariant gl_PointSize;

void main()
{
    gl_PointSize = 1.0;
    gl_Position = vec4(0, 0, 0, 0);
}
</script>
<script id="fragmentShaderInvariantGlPointCoord" type="text/something-not-javascript">#version 300 es
precision mediump float;
invariant gl_PointCoord;
out vec4 my_color;

void main()
{
    my_color = vec4(gl_PointCoord, 0.0, 0.0);
}
</script>
<script id="fragmentShaderVariantGlPointCoord" type="text/something-not-javascript">#version 300 es
precision mediump float;
out vec4 my_color;

void main()
{
    my_color = vec4(gl_PointCoord, 0.0, 0.0);
}
</script>
<script>
"use strict";
GLSLConformanceTester.runTests([
  {
      vShaderId: "vertexShaderInvariantGlPosition",
      vShaderSuccess: true,
      fShaderId: "fragmentShaderInvariantGlFragCoord",
      fShaderSuccess: true,
      linkSuccess: true,
      passMsg: "vertex shader with invariant gl_Position and fragment shader with invariant gl_FragCoord must succeed",
  },
  {
      vShaderId: "vertexShaderInvariantGlPosition",
      vShaderSuccess: true,
      fShaderId: "fragmentShaderVariantGlFragCoord",
      fShaderSuccess: true,
      linkSuccess: true,
      passMsg: "vertex shader with invariant gl_Position and fragment shader with variant gl_FragCoord must succeed",
  },
  {
    vShaderId: "vertexShaderInvariantGlPointSize",
    vShaderSuccess: true,
    fShaderId: "fragmentShaderInvariantGlPointCoord",
    fShaderSuccess: true,
    linkSuccess: true,
    passMsg: "vertex shader with invariant gl_PointSize and fragment shader with invariant gl_PointCoord must succeed",
  },
  {
    vShaderId: "vertexShaderInvariantGlPointSize",
    vShaderSuccess: true,
    fShaderId: "fragmentShaderVariantGlPointCoord",
    fShaderSuccess: true,
    linkSuccess: true,
    passMsg: "vertex shader with invariant gl_PointSize and fragment shader with variant gl_PointCoord must succeed",
  },
]);

var successfullyParsed = true;
</script>
</body>
</html>
